/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/technicians/route";
exports.ids = ["app/api/technicians/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist\\client\\components\\action-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist\\client\\components\\action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist\\client\\components\\request-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist\\client\\components\\request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!*********************************************************************************************!*\
  !*** external "next/dist\\client\\components\\static-generation-async-storage.external.js" ***!
  \*********************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist\\client\\components\\static-generation-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftechnicians%2Froute&page=%2Fapi%2Ftechnicians%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftechnicians%2Froute.ts&appDir=C%3A%5CUsers%5CFernando%5CDesktop%5CTiendaFix-Web%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CFernando%5CDesktop%5CTiendaFix-Web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftechnicians%2Froute&page=%2Fapi%2Ftechnicians%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftechnicians%2Froute.ts&appDir=C%3A%5CUsers%5CFernando%5CDesktop%5CTiendaFix-Web%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CFernando%5CDesktop%5CTiendaFix-Web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Fernando_Desktop_TiendaFix_Web_app_api_technicians_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/technicians/route.ts */ \"(rsc)/./app/api/technicians/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/technicians/route\",\n        pathname: \"/api/technicians\",\n        filename: \"route\",\n        bundlePath: \"app/api/technicians/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Fernando\\\\Desktop\\\\TiendaFix-Web\\\\app\\\\api\\\\technicians\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Fernando_Desktop_TiendaFix_Web_app_api_technicians_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/technicians/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0ZWNobmljaWFucyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdGVjaG5pY2lhbnMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ0ZWNobmljaWFucyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNGZXJuYW5kbyU1Q0Rlc2t0b3AlNUNUaWVuZGFGaXgtV2ViJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNGZXJuYW5kbyU1Q0Rlc2t0b3AlNUNUaWVuZGFGaXgtV2ViJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzRCO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDNko7O0FBRTdKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGllbmRhZml4LXdlYi8/MTZmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxGZXJuYW5kb1xcXFxEZXNrdG9wXFxcXFRpZW5kYUZpeC1XZWJcXFxcYXBwXFxcXGFwaVxcXFx0ZWNobmljaWFuc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdGVjaG5pY2lhbnMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS90ZWNobmljaWFuc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdGVjaG5pY2lhbnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxGZXJuYW5kb1xcXFxEZXNrdG9wXFxcXFRpZW5kYUZpeC1XZWJcXFxcYXBwXFxcXGFwaVxcXFx0ZWNobmljaWFuc1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS90ZWNobmljaWFucy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftechnicians%2Froute&page=%2Fapi%2Ftechnicians%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftechnicians%2Froute.ts&appDir=C%3A%5CUsers%5CFernando%5CDesktop%5CTiendaFix-Web%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CFernando%5CDesktop%5CTiendaFix-Web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/technicians/route.ts":
/*!**************************************!*\
  !*** ./app/api/technicians/route.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/./node_modules/@supabase/ssr/dist/index.mjs\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/headers.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_headers__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nasync function GET(request) {\n    try {\n        console.log(\"\\uD83D\\uDD27 Technicians API called - getting real data\");\n        const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies)();\n        const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_1__.createServerClient)(\"https://hdqhdijirmfmgtbhqpjq.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhkcWhkaWppcm1mbWd0YmhxcGpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3NzE2MzMsImV4cCI6MjA2NjM0NzYzM30.5uMXS_m808SWP__wHFTqEB1yiksTxvn3ZZcVBib_s34\", {\n            cookies: {\n                get (name) {\n                    return cookieStore.get(name)?.value;\n                }\n            }\n        });\n        const { searchParams } = new URL(request.url);\n        // Parámetros de consulta\n        const page = parseInt(searchParams.get(\"page\") || \"1\");\n        const limit = parseInt(searchParams.get(\"limit\") || \"12\");\n        const search = searchParams.get(\"search\") || \"\";\n        const role = searchParams.get(\"role\") || \"todos\";\n        const offset = (page - 1) * limit;\n        const organizationId = \"873d8154-8b40-4b8a-8d03-431bf9f697e6\" // ID fijo para pruebas\n        ;\n        try {\n            let query = supabase.from(\"users\").select(`\r\n          id, name, email, phone, role, is_active, last_login,\r\n          avatar_url, created_at, updated_at\r\n        `).eq(\"organization_id\", organizationId).in(\"role\", [\n                \"technician\",\n                \"owner\"\n            ]).order(\"created_at\", {\n                ascending: false\n            });\n            // Filtrar por rol si no es 'todos'\n            if (role !== \"todos\") {\n                query = query.eq(\"role\", role);\n            }\n            // Filtrar por búsqueda si se proporciona\n            if (search) {\n                query = query.or(`\r\n          name.ilike.%${search}%,\r\n          email.ilike.%${search}%\r\n        `);\n            }\n            // Obtener datos con paginación\n            const { data: technicians, error, count } = await query.range(offset, offset + limit - 1);\n            if (error) {\n                console.error(\"\\uD83D\\uDEA8 Error fetching technicians:\", error);\n                throw error;\n            }\n            // Obtener estadísticas de rendimiento para cada técnico\n            const techniciansWithStats = await Promise.all((technicians || []).map(async (technician)=>{\n                try {\n                    // Reparaciones asignadas\n                    const { data: assignedRepairs, error: assignedError } = await supabase.from(\"repairs\").select(\"id, status, created_at, updated_at, final_cost\").eq(\"assigned_technician_id\", technician.id).eq(\"organization_id\", organizationId);\n                    // Reparaciones del último mes\n                    const lastMonth = new Date();\n                    lastMonth.setMonth(lastMonth.getMonth() - 1);\n                    const { data: monthlyRepairs, error: monthlyError } = await supabase.from(\"repairs\").select(\"id, status, created_at, final_cost\").eq(\"assigned_technician_id\", technician.id).eq(\"organization_id\", organizationId).gte(\"created_at\", lastMonth.toISOString());\n                    if (assignedError || monthlyError) {\n                        console.warn(`Error fetching stats for technician ${technician.id}`);\n                        return technician // Devolver sin estadísticas en caso de error\n                        ;\n                    }\n                    const assignedRepairsList = assignedRepairs || [];\n                    const monthlyRepairsList = monthlyRepairs || [];\n                    // Calcular eficiencia (reparaciones completadas vs asignadas)\n                    const completedRepairs = assignedRepairsList.filter((r)=>r.status === \"completed\" || r.status === \"delivered\");\n                    const efficiency = assignedRepairsList.length > 0 ? completedRepairs.length / assignedRepairsList.length * 100 : 0;\n                    // Calcular tiempo promedio de reparación\n                    const completedWithTimes = completedRepairs.filter((r)=>r.created_at && r.updated_at);\n                    const avgRepairTime = completedWithTimes.length > 0 ? completedWithTimes.reduce((sum, repair)=>{\n                        const start = new Date(repair.created_at);\n                        const end = new Date(repair.updated_at);\n                        return sum + (end.getTime() - start.getTime());\n                    }, 0) / completedWithTimes.length / (1000 * 60 * 60 * 24) : 0 // En días\n                    ;\n                    // Ingresos generados\n                    const totalRevenue = assignedRepairsList.filter((r)=>r.final_cost && (r.status === \"completed\" || r.status === \"delivered\")).reduce((sum, r)=>sum + (r.final_cost || 0), 0);\n                    return {\n                        ...technician,\n                        stats: {\n                            totalReparaciones: assignedRepairsList.length,\n                            completadas: completedRepairs.length,\n                            enProceso: assignedRepairsList.filter((r)=>[\n                                    \"in_progress\",\n                                    \"diagnosed\",\n                                    \"waiting_parts\"\n                                ].includes(r.status)).length,\n                            pendientes: assignedRepairsList.filter((r)=>r.status === \"received\").length,\n                            reparacionesMes: monthlyRepairsList.length,\n                            eficiencia: Math.round(efficiency),\n                            tiempoPromedio: Math.round(avgRepairTime * 10) / 10,\n                            ingrenosGenerados: totalRevenue,\n                            ultimoAcceso: technician.last_login\n                        }\n                    };\n                } catch (statsError) {\n                    console.warn(`Error calculating stats for technician ${technician.id}:`, statsError);\n                    return technician // Devolver sin estadísticas en caso de error\n                    ;\n                }\n            }));\n            console.log(`✅ Fetched ${technicians?.length || 0} technicians from database`);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: true,\n                data: techniciansWithStats,\n                pagination: {\n                    page,\n                    limit,\n                    total: count || 0,\n                    totalPages: Math.ceil((count || 0) / limit)\n                }\n            });\n        } catch (dbError) {\n            console.error(\"\\uD83D\\uDEA8 Database query error:\", dbError);\n            // Devolver estructura vacía si falla la BD\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: true,\n                data: [],\n                pagination: {\n                    page: 1,\n                    limit: 12,\n                    total: 0,\n                    totalPages: 0\n                }\n            });\n        }\n    } catch (error) {\n        console.error(\"\\uD83D\\uDEA8 Technicians API error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Error interno del servidor\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        console.log(\"\\uD83D\\uDD27 Creating new technician...\");\n        const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies)();\n        const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_1__.createServerClient)(\"https://hdqhdijirmfmgtbhqpjq.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhkcWhkaWppcm1mbWd0YmhxcGpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA3NzE2MzMsImV4cCI6MjA2NjM0NzYzM30.5uMXS_m808SWP__wHFTqEB1yiksTxvn3ZZcVBib_s34\", {\n            cookies: {\n                get (name) {\n                    return cookieStore.get(name)?.value;\n                },\n                set: (name, value, options)=>{\n                    cookieStore.set({\n                        name,\n                        value,\n                        ...options\n                    });\n                },\n                remove: (name, options)=>{\n                    cookieStore.set({\n                        name,\n                        value: \"\",\n                        ...options\n                    });\n                }\n            }\n        });\n        const { data: { session } } = await supabase.auth.getSession();\n        if (!session) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Not authenticated\"\n            }, {\n                status: 401\n            });\n        }\n        const { data: adminProfile } = await supabase.from(\"users\").select(\"organization_id\").eq(\"auth_user_id\", session.user.id).single();\n        if (!adminProfile) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Admin profile not found\"\n            }, {\n                status: 404\n            });\n        }\n        const organizationId = adminProfile.organization_id;\n        const body = await request.json();\n        // Validaciones\n        if (!body.name || !body.email || !body.password) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Nombre, email y contrase\\xf1a son obligatorios\"\n            }, {\n                status: 400\n            });\n        }\n        if (![\n            \"technician\",\n            \"owner\"\n        ].includes(body.role)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Rol inv\\xe1lido\"\n            }, {\n                status: 400\n            });\n        }\n        // Crear un cliente de Supabase con privilegios de administrador\n        const supabaseAdmin = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_1__.createServerClient)(\"https://hdqhdijirmfmgtbhqpjq.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY, {\n            cookies: {\n                get (name) {\n                    return cookieStore.get(name)?.value;\n                },\n                set: (name, value, options)=>{\n                    cookieStore.set({\n                        name,\n                        value,\n                        ...options\n                    });\n                },\n                remove: (name, options)=>{\n                    cookieStore.set({\n                        name,\n                        value: \"\",\n                        ...options\n                    });\n                }\n            }\n        });\n        // 1. Crear usuario en Supabase Auth con el cliente admin\n        const { data: authUser, error: authError } = await supabaseAdmin.auth.admin.createUser({\n            email: body.email,\n            password: body.password,\n            email_confirm: true,\n            user_metadata: {\n                full_name: body.name,\n                role: body.role\n            }\n        });\n        if (authError) {\n            console.error(\"\\uD83D\\uDEA8 Error creating auth user:\", authError);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Error al crear las credenciales del usuario\",\n                details: authError.message\n            }, {\n                status: 500\n            });\n        }\n        // 2. Crear usuario en la tabla `users` de la aplicación\n        const newTechnicianProfile = {\n            organization_id: organizationId,\n            auth_user_id: authUser.user.id,\n            name: body.name,\n            email: body.email,\n            phone: body.phone || null,\n            role: body.role,\n            is_active: true\n        };\n        const { data: technician, error: profileError } = await supabase.from(\"users\").insert(newTechnicianProfile).select().single();\n        if (profileError) {\n            console.error(\"\\uD83D\\uDEA8 Error creating technician profile:\", profileError);\n            // Si falla, intentar eliminar el usuario de Auth para evitar registros huérfanos\n            await supabaseAdmin.auth.admin.deleteUser(authUser.user.id);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                error: \"Error al guardar el perfil del t\\xe9cnico\",\n                details: profileError.message\n            }, {\n                status: 500\n            });\n        }\n        console.log(\"✅ Technician created successfully:\", technician.id);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: true,\n            data: technician\n        });\n    } catch (error) {\n        console.error(\"\\uD83D\\uDEA8 Create technician error:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"Error interno del servidor\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aEcsTUFBTSxHQUNOa0YsTUFBTTtRQUVULElBQUlrQixjQUFjO1lBQ2hCM0gsUUFBUStCLEtBQUssQ0FBQyxtREFBeUM0RjtZQUN2RCxpRkFBaUY7WUFDakYsTUFBTWIsY0FBY1QsSUFBSSxDQUFDYSxLQUFLLENBQUNXLFVBQVUsQ0FBQ2IsU0FBU1IsSUFBSSxDQUFDL0QsRUFBRTtZQUMxRCxPQUFPOUMsa0ZBQVlBLENBQUMyRixJQUFJLENBQUM7Z0JBQUV2RCxPQUFPO2dCQUEwQzhELFNBQVM4QixhQUFhNUIsT0FBTztZQUFDLEdBQUc7Z0JBQUV2QyxRQUFRO1lBQUk7UUFDN0g7UUFFQXhELFFBQVFDLEdBQUcsQ0FBQyxzQ0FBc0NxQyxXQUFXRyxFQUFFO1FBQy9ELE9BQU85QyxrRkFBWUEsQ0FBQzJGLElBQUksQ0FBQztZQUFFQyxTQUFTO1lBQU0xRCxNQUFNUztRQUFXO0lBRTdELEVBQUUsT0FBT1AsT0FBTztRQUNkL0IsUUFBUStCLEtBQUssQ0FBQyx5Q0FBK0JBO1FBQzdDLE9BQU9wQyxrRkFBWUEsQ0FBQzJGLElBQUksQ0FBQztZQUFFdkQsT0FBTztZQUE4QjhELFNBQVM5RCxpQkFBaUIrRCxRQUFRL0QsTUFBTWdFLE9BQU8sR0FBRztRQUFnQixHQUFHO1lBQUV2QyxRQUFRO1FBQUk7SUFDcko7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3RpZW5kYWZpeC13ZWIvLi9hcHAvYXBpL3RlY2huaWNpYW5zL3JvdXRlLnRzP2I5YzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgeyBjcmVhdGVTZXJ2ZXJDbGllbnQsIHR5cGUgQ29va2llT3B0aW9ucyB9IGZyb20gJ0BzdXBhYmFzZS9zc3InXHJcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCfwn5SnIFRlY2huaWNpYW5zIEFQSSBjYWxsZWQgLSBnZXR0aW5nIHJlYWwgZGF0YScpXHJcbiAgICBcclxuICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gY29va2llcygpXHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVNlcnZlckNsaWVudChcclxuICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcclxuICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhLFxyXG4gICAgICB7XHJcbiAgICAgICAgY29va2llczoge1xyXG4gICAgICAgICAgZ2V0KG5hbWU6IHN0cmluZykgeyByZXR1cm4gY29va2llU3RvcmUuZ2V0KG5hbWUpPy52YWx1ZSB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH1cclxuICAgIClcclxuICAgIFxyXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpXHJcbiAgICBcclxuICAgIC8vIFBhcsOhbWV0cm9zIGRlIGNvbnN1bHRhXHJcbiAgICBjb25zdCBwYWdlID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgncGFnZScpIHx8ICcxJylcclxuICAgIGNvbnN0IGxpbWl0ID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldCgnbGltaXQnKSB8fCAnMTInKVxyXG4gICAgY29uc3Qgc2VhcmNoID0gc2VhcmNoUGFyYW1zLmdldCgnc2VhcmNoJykgfHwgJydcclxuICAgIGNvbnN0IHJvbGUgPSBzZWFyY2hQYXJhbXMuZ2V0KCdyb2xlJykgfHwgJ3RvZG9zJ1xyXG4gICAgXHJcbiAgICBjb25zdCBvZmZzZXQgPSAocGFnZSAtIDEpICogbGltaXRcclxuICAgIGNvbnN0IG9yZ2FuaXphdGlvbklkID0gJzg3M2Q4MTU0LThiNDAtNGI4YS04ZDAzLTQzMWJmOWY2OTdlNicgLy8gSUQgZmlqbyBwYXJhIHBydWViYXNcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBsZXQgcXVlcnkgPSBzdXBhYmFzZVxyXG4gICAgICAgIC5mcm9tKCd1c2VycycpXHJcbiAgICAgICAgLnNlbGVjdChgXHJcbiAgICAgICAgICBpZCwgbmFtZSwgZW1haWwsIHBob25lLCByb2xlLCBpc19hY3RpdmUsIGxhc3RfbG9naW4sXHJcbiAgICAgICAgICBhdmF0YXJfdXJsLCBjcmVhdGVkX2F0LCB1cGRhdGVkX2F0XHJcbiAgICAgICAgYClcclxuICAgICAgICAuZXEoJ29yZ2FuaXphdGlvbl9pZCcsIG9yZ2FuaXphdGlvbklkKVxyXG4gICAgICAgIC5pbigncm9sZScsIFsndGVjaG5pY2lhbicsICdvd25lciddKVxyXG4gICAgICAgIC5vcmRlcignY3JlYXRlZF9hdCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxyXG5cclxuICAgICAgLy8gRmlsdHJhciBwb3Igcm9sIHNpIG5vIGVzICd0b2RvcydcclxuICAgICAgaWYgKHJvbGUgIT09ICd0b2RvcycpIHtcclxuICAgICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdyb2xlJywgcm9sZSlcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRmlsdHJhciBwb3IgYsO6c3F1ZWRhIHNpIHNlIHByb3BvcmNpb25hXHJcbiAgICAgIGlmIChzZWFyY2gpIHtcclxuICAgICAgICBxdWVyeSA9IHF1ZXJ5Lm9yKGBcclxuICAgICAgICAgIG5hbWUuaWxpa2UuJSR7c2VhcmNofSUsXHJcbiAgICAgICAgICBlbWFpbC5pbGlrZS4lJHtzZWFyY2h9JVxyXG4gICAgICAgIGApXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIE9idGVuZXIgZGF0b3MgY29uIHBhZ2luYWNpw7NuXHJcbiAgICAgIGNvbnN0IHsgZGF0YTogdGVjaG5pY2lhbnMsIGVycm9yLCBjb3VudCB9ID0gYXdhaXQgcXVlcnlcclxuICAgICAgICAucmFuZ2Uob2Zmc2V0LCBvZmZzZXQgKyBsaW1pdCAtIDEpXHJcblxyXG4gICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCfwn5qoIEVycm9yIGZldGNoaW5nIHRlY2huaWNpYW5zOicsIGVycm9yKVxyXG4gICAgICAgIHRocm93IGVycm9yXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIE9idGVuZXIgZXN0YWTDrXN0aWNhcyBkZSByZW5kaW1pZW50byBwYXJhIGNhZGEgdMOpY25pY29cclxuICAgICAgY29uc3QgdGVjaG5pY2lhbnNXaXRoU3RhdHMgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgICAodGVjaG5pY2lhbnMgfHwgW10pLm1hcChhc3luYyAodGVjaG5pY2lhbikgPT4ge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gUmVwYXJhY2lvbmVzIGFzaWduYWRhc1xyXG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IGFzc2lnbmVkUmVwYWlycywgZXJyb3I6IGFzc2lnbmVkRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgICAgLmZyb20oJ3JlcGFpcnMnKVxyXG4gICAgICAgICAgICAgIC5zZWxlY3QoJ2lkLCBzdGF0dXMsIGNyZWF0ZWRfYXQsIHVwZGF0ZWRfYXQsIGZpbmFsX2Nvc3QnKVxyXG4gICAgICAgICAgICAgIC5lcSgnYXNzaWduZWRfdGVjaG5pY2lhbl9pZCcsIHRlY2huaWNpYW4uaWQpXHJcbiAgICAgICAgICAgICAgLmVxKCdvcmdhbml6YXRpb25faWQnLCBvcmdhbml6YXRpb25JZClcclxuXHJcbiAgICAgICAgICAgIC8vIFJlcGFyYWNpb25lcyBkZWwgw7psdGltbyBtZXNcclxuICAgICAgICAgICAgY29uc3QgbGFzdE1vbnRoID0gbmV3IERhdGUoKVxyXG4gICAgICAgICAgICBsYXN0TW9udGguc2V0TW9udGgobGFzdE1vbnRoLmdldE1vbnRoKCkgLSAxKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgeyBkYXRhOiBtb250aGx5UmVwYWlycywgZXJyb3I6IG1vbnRobHlFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgICAgICAuZnJvbSgncmVwYWlycycpXHJcbiAgICAgICAgICAgICAgLnNlbGVjdCgnaWQsIHN0YXR1cywgY3JlYXRlZF9hdCwgZmluYWxfY29zdCcpXHJcbiAgICAgICAgICAgICAgLmVxKCdhc3NpZ25lZF90ZWNobmljaWFuX2lkJywgdGVjaG5pY2lhbi5pZClcclxuICAgICAgICAgICAgICAuZXEoJ29yZ2FuaXphdGlvbl9pZCcsIG9yZ2FuaXphdGlvbklkKVxyXG4gICAgICAgICAgICAgIC5ndGUoJ2NyZWF0ZWRfYXQnLCBsYXN0TW9udGgudG9JU09TdHJpbmcoKSlcclxuXHJcbiAgICAgICAgICAgIGlmIChhc3NpZ25lZEVycm9yIHx8IG1vbnRobHlFcnJvcikge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihgRXJyb3IgZmV0Y2hpbmcgc3RhdHMgZm9yIHRlY2huaWNpYW4gJHt0ZWNobmljaWFuLmlkfWApXHJcbiAgICAgICAgICAgICAgcmV0dXJuIHRlY2huaWNpYW4gLy8gRGV2b2x2ZXIgc2luIGVzdGFkw61zdGljYXMgZW4gY2FzbyBkZSBlcnJvclxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBhc3NpZ25lZFJlcGFpcnNMaXN0ID0gYXNzaWduZWRSZXBhaXJzIHx8IFtdXHJcbiAgICAgICAgICAgIGNvbnN0IG1vbnRobHlSZXBhaXJzTGlzdCA9IG1vbnRobHlSZXBhaXJzIHx8IFtdXHJcblxyXG4gICAgICAgICAgICAvLyBDYWxjdWxhciBlZmljaWVuY2lhIChyZXBhcmFjaW9uZXMgY29tcGxldGFkYXMgdnMgYXNpZ25hZGFzKVxyXG4gICAgICAgICAgICBjb25zdCBjb21wbGV0ZWRSZXBhaXJzID0gYXNzaWduZWRSZXBhaXJzTGlzdC5maWx0ZXIociA9PiByLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcgfHwgci5zdGF0dXMgPT09ICdkZWxpdmVyZWQnKVxyXG4gICAgICAgICAgICBjb25zdCBlZmZpY2llbmN5ID0gYXNzaWduZWRSZXBhaXJzTGlzdC5sZW5ndGggPiAwID8gXHJcbiAgICAgICAgICAgICAgKGNvbXBsZXRlZFJlcGFpcnMubGVuZ3RoIC8gYXNzaWduZWRSZXBhaXJzTGlzdC5sZW5ndGgpICogMTAwIDogMFxyXG5cclxuICAgICAgICAgICAgLy8gQ2FsY3VsYXIgdGllbXBvIHByb21lZGlvIGRlIHJlcGFyYWNpw7NuXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlZFdpdGhUaW1lcyA9IGNvbXBsZXRlZFJlcGFpcnMuZmlsdGVyKHIgPT4gci5jcmVhdGVkX2F0ICYmIHIudXBkYXRlZF9hdClcclxuICAgICAgICAgICAgY29uc3QgYXZnUmVwYWlyVGltZSA9IGNvbXBsZXRlZFdpdGhUaW1lcy5sZW5ndGggPiAwID9cclxuICAgICAgICAgICAgICBjb21wbGV0ZWRXaXRoVGltZXMucmVkdWNlKChzdW0sIHJlcGFpcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZShyZXBhaXIuY3JlYXRlZF9hdClcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZCA9IG5ldyBEYXRlKHJlcGFpci51cGRhdGVkX2F0KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1bSArIChlbmQuZ2V0VGltZSgpIC0gc3RhcnQuZ2V0VGltZSgpKVxyXG4gICAgICAgICAgICAgIH0sIDApIC8gY29tcGxldGVkV2l0aFRpbWVzLmxlbmd0aCAvICgxMDAwICogNjAgKiA2MCAqIDI0KSA6IDAgLy8gRW4gZMOtYXNcclxuXHJcbiAgICAgICAgICAgIC8vIEluZ3Jlc29zIGdlbmVyYWRvc1xyXG4gICAgICAgICAgICBjb25zdCB0b3RhbFJldmVudWUgPSBhc3NpZ25lZFJlcGFpcnNMaXN0XHJcbiAgICAgICAgICAgICAgLmZpbHRlcihyID0+IHIuZmluYWxfY29zdCAmJiAoci5zdGF0dXMgPT09ICdjb21wbGV0ZWQnIHx8IHIuc3RhdHVzID09PSAnZGVsaXZlcmVkJykpXHJcbiAgICAgICAgICAgICAgLnJlZHVjZSgoc3VtLCByKSA9PiBzdW0gKyAoci5maW5hbF9jb3N0IHx8IDApLCAwKVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAuLi50ZWNobmljaWFuLFxyXG4gICAgICAgICAgICAgIHN0YXRzOiB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbFJlcGFyYWNpb25lczogYXNzaWduZWRSZXBhaXJzTGlzdC5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0YWRhczogY29tcGxldGVkUmVwYWlycy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBlblByb2Nlc286IGFzc2lnbmVkUmVwYWlyc0xpc3QuZmlsdGVyKHIgPT4gWydpbl9wcm9ncmVzcycsICdkaWFnbm9zZWQnLCAnd2FpdGluZ19wYXJ0cyddLmluY2x1ZGVzKHIuc3RhdHVzKSkubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgcGVuZGllbnRlczogYXNzaWduZWRSZXBhaXJzTGlzdC5maWx0ZXIociA9PiByLnN0YXR1cyA9PT0gJ3JlY2VpdmVkJykubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgcmVwYXJhY2lvbmVzTWVzOiBtb250aGx5UmVwYWlyc0xpc3QubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgZWZpY2llbmNpYTogTWF0aC5yb3VuZChlZmZpY2llbmN5KSxcclxuICAgICAgICAgICAgICAgIHRpZW1wb1Byb21lZGlvOiBNYXRoLnJvdW5kKGF2Z1JlcGFpclRpbWUgKiAxMCkgLyAxMCxcclxuICAgICAgICAgICAgICAgIGluZ3Jlbm9zR2VuZXJhZG9zOiB0b3RhbFJldmVudWUsXHJcbiAgICAgICAgICAgICAgICB1bHRpbW9BY2Nlc286IHRlY2huaWNpYW4ubGFzdF9sb2dpblxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBjYXRjaCAoc3RhdHNFcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYEVycm9yIGNhbGN1bGF0aW5nIHN0YXRzIGZvciB0ZWNobmljaWFuICR7dGVjaG5pY2lhbi5pZH06YCwgc3RhdHNFcnJvcilcclxuICAgICAgICAgICAgcmV0dXJuIHRlY2huaWNpYW4gLy8gRGV2b2x2ZXIgc2luIGVzdGFkw61zdGljYXMgZW4gY2FzbyBkZSBlcnJvclxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIClcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKGDinIUgRmV0Y2hlZCAke3RlY2huaWNpYW5zPy5sZW5ndGggfHwgMH0gdGVjaG5pY2lhbnMgZnJvbSBkYXRhYmFzZWApXHJcblxyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgZGF0YTogdGVjaG5pY2lhbnNXaXRoU3RhdHMsXHJcbiAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgcGFnZSxcclxuICAgICAgICAgIGxpbWl0LFxyXG4gICAgICAgICAgdG90YWw6IGNvdW50IHx8IDAsXHJcbiAgICAgICAgICB0b3RhbFBhZ2VzOiBNYXRoLmNlaWwoKGNvdW50IHx8IDApIC8gbGltaXQpXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgIH0gY2F0Y2ggKGRiRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign8J+aqCBEYXRhYmFzZSBxdWVyeSBlcnJvcjonLCBkYkVycm9yKVxyXG4gICAgICBcclxuICAgICAgLy8gRGV2b2x2ZXIgZXN0cnVjdHVyYSB2YWPDrWEgc2kgZmFsbGEgbGEgQkRcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIGRhdGE6IFtdLFxyXG4gICAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICAgIHBhZ2U6IDEsXHJcbiAgICAgICAgICBsaW1pdDogMTIsXHJcbiAgICAgICAgICB0b3RhbDogMCxcclxuICAgICAgICAgIHRvdGFsUGFnZXM6IDBcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfwn5qoIFRlY2huaWNpYW5zIEFQSSBlcnJvcjonLCBlcnJvcilcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ0Vycm9yIGludGVybm8gZGVsIHNlcnZpZG9yJywgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zb2xlLmxvZygn8J+UpyBDcmVhdGluZyBuZXcgdGVjaG5pY2lhbi4uLicpXHJcbiAgICBcclxuICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gY29va2llcygpXHJcbiAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVNlcnZlckNsaWVudChcclxuICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcclxuICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhLFxyXG4gICAgICB7XHJcbiAgICAgICAgY29va2llczoge1xyXG4gICAgICAgICAgZ2V0KG5hbWU6IHN0cmluZykgeyByZXR1cm4gY29va2llU3RvcmUuZ2V0KG5hbWUpPy52YWx1ZSB9LFxyXG4gICAgICAgICAgc2V0OiAobmFtZTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBvcHRpb25zOiBDb29raWVPcHRpb25zKSA9PiB7IGNvb2tpZVN0b3JlLnNldCh7IG5hbWUsIHZhbHVlLCAuLi5vcHRpb25zIH0pIH0sXHJcbiAgICAgICAgICByZW1vdmU6IChuYW1lOiBzdHJpbmcsIG9wdGlvbnM6IENvb2tpZU9wdGlvbnMpID0+IHsgY29va2llU3RvcmUuc2V0KHsgbmFtZSwgdmFsdWU6ICcnLCAuLi5vcHRpb25zIH0pIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfVxyXG4gICAgKVxyXG4gICAgXHJcbiAgICBjb25zdCB7IGRhdGE6IHsgc2Vzc2lvbiB9IH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFNlc3Npb24oKTtcclxuICAgIGlmICghc2Vzc2lvbikge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ05vdCBhdXRoZW50aWNhdGVkJyB9LCB7IHN0YXR1czogNDAxIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YTogYWRtaW5Qcm9maWxlIH0gPSBhd2FpdCBzdXBhYmFzZVxyXG4gICAgICAuZnJvbSgndXNlcnMnKVxyXG4gICAgICAuc2VsZWN0KCdvcmdhbml6YXRpb25faWQnKVxyXG4gICAgICAuZXEoJ2F1dGhfdXNlcl9pZCcsIHNlc3Npb24udXNlci5pZClcclxuICAgICAgLnNpbmdsZSgpO1xyXG5cclxuICAgIGlmICghYWRtaW5Qcm9maWxlKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnQWRtaW4gcHJvZmlsZSBub3QgZm91bmQnIH0sIHsgc3RhdHVzOiA0MDQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgb3JnYW5pemF0aW9uSWQgPSBhZG1pblByb2ZpbGUub3JnYW5pemF0aW9uX2lkO1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXHJcblxyXG4gICAgLy8gVmFsaWRhY2lvbmVzXHJcbiAgICBpZiAoIWJvZHkubmFtZSB8fCAhYm9keS5lbWFpbCB8fCAhYm9keS5wYXNzd29yZCkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ05vbWJyZSwgZW1haWwgeSBjb250cmFzZcOxYSBzb24gb2JsaWdhdG9yaW9zJyB9LCB7IHN0YXR1czogNDAwIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKCFbJ3RlY2huaWNpYW4nLCAnb3duZXInXS5pbmNsdWRlcyhib2R5LnJvbGUpKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnUm9sIGludsOhbGlkbycgfSwgeyBzdGF0dXM6IDQwMCB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDcmVhciB1biBjbGllbnRlIGRlIFN1cGFiYXNlIGNvbiBwcml2aWxlZ2lvcyBkZSBhZG1pbmlzdHJhZG9yXHJcbiAgICBjb25zdCBzdXBhYmFzZUFkbWluID0gY3JlYXRlU2VydmVyQ2xpZW50KFxyXG4gICAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXHJcbiAgICAgICAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSEsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgY29va2llczoge1xyXG4gICAgICAgICAgICBnZXQobmFtZTogc3RyaW5nKSB7IHJldHVybiBjb29raWVTdG9yZS5nZXQobmFtZSk/LnZhbHVlIH0sXHJcbiAgICAgICAgICAgIHNldDogKG5hbWU6IHN0cmluZywgdmFsdWU6IHN0cmluZywgb3B0aW9uczogQ29va2llT3B0aW9ucykgPT4geyBjb29raWVTdG9yZS5zZXQoeyBuYW1lLCB2YWx1ZSwgLi4ub3B0aW9ucyB9KSB9LFxyXG4gICAgICAgICAgICByZW1vdmU6IChuYW1lOiBzdHJpbmcsIG9wdGlvbnM6IENvb2tpZU9wdGlvbnMpID0+IHsgY29va2llU3RvcmUuc2V0KHsgbmFtZSwgdmFsdWU6ICcnLCAuLi5vcHRpb25zIH0pIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH1cclxuICAgICAgKVxyXG5cclxuICAgIC8vIDEuIENyZWFyIHVzdWFyaW8gZW4gU3VwYWJhc2UgQXV0aCBjb24gZWwgY2xpZW50ZSBhZG1pblxyXG4gICAgY29uc3QgeyBkYXRhOiBhdXRoVXNlciwgZXJyb3I6IGF1dGhFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pbi5hdXRoLmFkbWluLmNyZWF0ZVVzZXIoe1xyXG4gICAgICBlbWFpbDogYm9keS5lbWFpbCxcclxuICAgICAgcGFzc3dvcmQ6IGJvZHkucGFzc3dvcmQsXHJcbiAgICAgIGVtYWlsX2NvbmZpcm06IHRydWUsIC8vIEF1dG8tY29uZmlybWFyIGVtYWlsXHJcbiAgICAgIHVzZXJfbWV0YWRhdGE6IHtcclxuICAgICAgICBmdWxsX25hbWU6IGJvZHkubmFtZSxcclxuICAgICAgICByb2xlOiBib2R5LnJvbGVcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGF1dGhFcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfwn5qoIEVycm9yIGNyZWF0aW5nIGF1dGggdXNlcjonLCBhdXRoRXJyb3IpO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0Vycm9yIGFsIGNyZWFyIGxhcyBjcmVkZW5jaWFsZXMgZGVsIHVzdWFyaW8nLCBkZXRhaWxzOiBhdXRoRXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIDIuIENyZWFyIHVzdWFyaW8gZW4gbGEgdGFibGEgYHVzZXJzYCBkZSBsYSBhcGxpY2FjacOzblxyXG4gICAgY29uc3QgbmV3VGVjaG5pY2lhblByb2ZpbGUgPSB7XHJcbiAgICAgIG9yZ2FuaXphdGlvbl9pZDogb3JnYW5pemF0aW9uSWQsXHJcbiAgICAgIGF1dGhfdXNlcl9pZDogYXV0aFVzZXIudXNlci5pZCwgLy8gRW5sYXphciBjb24gZWwgdXN1YXJpbyBkZSBBdXRoXHJcbiAgICAgIG5hbWU6IGJvZHkubmFtZSxcclxuICAgICAgZW1haWw6IGJvZHkuZW1haWwsXHJcbiAgICAgIHBob25lOiBib2R5LnBob25lIHx8IG51bGwsXHJcbiAgICAgIHJvbGU6IGJvZHkucm9sZSxcclxuICAgICAgaXNfYWN0aXZlOiB0cnVlLFxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgZGF0YTogdGVjaG5pY2lhbiwgZXJyb3I6IHByb2ZpbGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgLmZyb20oJ3VzZXJzJylcclxuICAgICAgLmluc2VydChuZXdUZWNobmljaWFuUHJvZmlsZSlcclxuICAgICAgLnNlbGVjdCgpXHJcbiAgICAgIC5zaW5nbGUoKVxyXG5cclxuICAgIGlmIChwcm9maWxlRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcign8J+aqCBFcnJvciBjcmVhdGluZyB0ZWNobmljaWFuIHByb2ZpbGU6JywgcHJvZmlsZUVycm9yKVxyXG4gICAgICAvLyBTaSBmYWxsYSwgaW50ZW50YXIgZWxpbWluYXIgZWwgdXN1YXJpbyBkZSBBdXRoIHBhcmEgZXZpdGFyIHJlZ2lzdHJvcyBodcOpcmZhbm9zXHJcbiAgICAgIGF3YWl0IHN1cGFiYXNlQWRtaW4uYXV0aC5hZG1pbi5kZWxldGVVc2VyKGF1dGhVc2VyLnVzZXIuaWQpO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0Vycm9yIGFsIGd1YXJkYXIgZWwgcGVyZmlsIGRlbCB0w6ljbmljbycsIGRldGFpbHM6IHByb2ZpbGVFcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ+KchSBUZWNobmljaWFuIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5OicsIHRlY2huaWNpYW4uaWQpXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiB0ZWNobmljaWFuIH0pXHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfwn5qoIENyZWF0ZSB0ZWNobmljaWFuIGVycm9yOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdFcnJvciBpbnRlcm5vIGRlbCBzZXJ2aWRvcicsIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InIH0sIHsgc3RhdHVzOiA1MDAgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJjb29raWVzIiwiR0VUIiwicmVxdWVzdCIsImNvbnNvbGUiLCJsb2ciLCJjb29raWVTdG9yZSIsInN1cGFiYXNlIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiZ2V0IiwibmFtZSIsInZhbHVlIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwicGFnZSIsInBhcnNlSW50IiwibGltaXQiLCJzZWFyY2giLCJyb2xlIiwib2Zmc2V0Iiwib3JnYW5pemF0aW9uSWQiLCJxdWVyeSIsImZyb20iLCJzZWxlY3QiLCJlcSIsImluIiwib3JkZXIiLCJhc2NlbmRpbmciLCJvciIsImRhdGEiLCJ0ZWNobmljaWFucyIsImVycm9yIiwiY291bnQiLCJyYW5nZSIsInRlY2huaWNpYW5zV2l0aFN0YXRzIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsInRlY2huaWNpYW4iLCJhc3NpZ25lZFJlcGFpcnMiLCJhc3NpZ25lZEVycm9yIiwiaWQiLCJsYXN0TW9udGgiLCJEYXRlIiwic2V0TW9udGgiLCJnZXRNb250aCIsIm1vbnRobHlSZXBhaXJzIiwibW9udGhseUVycm9yIiwiZ3RlIiwidG9JU09TdHJpbmciLCJ3YXJuIiwiYXNzaWduZWRSZXBhaXJzTGlzdCIsIm1vbnRobHlSZXBhaXJzTGlzdCIsImNvbXBsZXRlZFJlcGFpcnMiLCJmaWx0ZXIiLCJyIiwic3RhdHVzIiwiZWZmaWNpZW5jeSIsImxlbmd0aCIsImNvbXBsZXRlZFdpdGhUaW1lcyIsImNyZWF0ZWRfYXQiLCJ1cGRhdGVkX2F0IiwiYXZnUmVwYWlyVGltZSIsInJlZHVjZSIsInN1bSIsInJlcGFpciIsInN0YXJ0IiwiZW5kIiwiZ2V0VGltZSIsInRvdGFsUmV2ZW51ZSIsImZpbmFsX2Nvc3QiLCJzdGF0cyIsInRvdGFsUmVwYXJhY2lvbmVzIiwiY29tcGxldGFkYXMiLCJlblByb2Nlc28iLCJpbmNsdWRlcyIsInBlbmRpZW50ZXMiLCJyZXBhcmFjaW9uZXNNZXMiLCJlZmljaWVuY2lhIiwiTWF0aCIsInJvdW5kIiwidGllbXBvUHJvbWVkaW8iLCJpbmdyZW5vc0dlbmVyYWRvcyIsInVsdGltb0FjY2VzbyIsImxhc3RfbG9naW4iLCJzdGF0c0Vycm9yIiwianNvbiIsInN1Y2Nlc3MiLCJwYWdpbmF0aW9uIiwidG90YWwiLCJ0b3RhbFBhZ2VzIiwiY2VpbCIsImRiRXJyb3IiLCJkZXRhaWxzIiwiRXJyb3IiLCJtZXNzYWdlIiwiUE9TVCIsInNldCIsIm9wdGlvbnMiLCJyZW1vdmUiLCJzZXNzaW9uIiwiYXV0aCIsImdldFNlc3Npb24iLCJhZG1pblByb2ZpbGUiLCJ1c2VyIiwic2luZ2xlIiwib3JnYW5pemF0aW9uX2lkIiwiYm9keSIsImVtYWlsIiwicGFzc3dvcmQiLCJzdXBhYmFzZUFkbWluIiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImF1dGhVc2VyIiwiYXV0aEVycm9yIiwiYWRtaW4iLCJjcmVhdGVVc2VyIiwiZW1haWxfY29uZmlybSIsInVzZXJfbWV0YWRhdGEiLCJmdWxsX25hbWUiLCJuZXdUZWNobmljaWFuUHJvZmlsZSIsImF1dGhfdXNlcl9pZCIsInBob25lIiwiaXNfYWN0aXZlIiwicHJvZmlsZUVycm9yIiwiaW5zZXJ0IiwiZGVsZXRlVXNlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/technicians/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/ws","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions","vendor-chunks/isows","vendor-chunks/ramda","vendor-chunks/cookie"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftechnicians%2Froute&page=%2Fapi%2Ftechnicians%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftechnicians%2Froute.ts&appDir=C%3A%5CUsers%5CFernando%5CDesktop%5CTiendaFix-Web%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CFernando%5CDesktop%5CTiendaFix-Web&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();